from rpy2.robjects import DataFrame, FloatVector, IntVector
from rpy2.robjects.packages import importr
from math import isclose

sk_core = [13.89978893,
0.06198877,
6.031984161,
20.85683693,
30.0311749,
0,
2.446172233,
0,
0,
0,
0.658034636,
8.368483954,
32.79205935,
4.448886341,
38.72867617,
1.182554998,
3.87668231,
32.84927975,
48.81377222,
4.611010817,
0.505446894,
0,
0,
4.97817507,
19.18314014,
1.921398292,
1.544950884,
23.83229789,
3.352161949,
0,
0,
29.92150246,
24.18038868]
rapid_core = [12,
0,
11,
26,
13,
0,
0,
0,
0,
0,
7,
9,
40,
8,
49,
0,
7,
32,
24,
3,
0,
0,
0,
8,
14,
0,
0,
22,
13,
0,
0,
27,
39]

r_icc = importr("ICC")
df = DataFrame({"sk_core": IntVector(sk_core),
                "rapid_core": FloatVector(rapid_core)})
icc_res = r_icc.ICCbare("sk_core", "rapid_core", data=df)
icc_val = icc_res[0] # icc_val now holds the icc value

# check whether icc value equals reference value
print(isclose(icc_val, 0.728, abs_tol=0.001))